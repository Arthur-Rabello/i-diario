<tr class="nested-fields">
  <td style="width: 10px">
    <%= f.input :lesson_number, input_html: { readonly: 'true', style: 'width 40px'}, label: false %>
  </td>
  <% Workdays.list.each do |weekday| %>
  <td>
    <%= f.association :lessons_board_lesson_weekdays,
                      collection: [f.object.lessons_board_lesson_weekdays.select{|it| it.weekday == weekday}.first || f.object.lessons_board_lesson_weekdays.build(weekday: weekday)] do |item| %>
      <%= item.hidden_field :id %>
      <%= item.hidden_field :weekday %>
      <% if action_name != "show" %>
        <%= item.association :teacher_discipline_classroom, as: :select2, elements: @teachers || [], label: false,
                             data: { without_json_parser: true }%>
      <% else %>
        <%= f.input :teacher_discipline_classroom, readonly: true, input_html: { style: 'width: 250px',
            value: item.object.teacher_discipline_classroom_id.nil? ? '' :
                   teacher_name_and_discipline(item.object.teacher_discipline_classroom_id) },
          label: false%>
      <% end %>
    <% end %>
  </td>
  <% end %>

  <td class="actions" style="display: none">
    <%= f.hidden_field :id %>
    <%= link_to_remove_association t('helpers.links.destroy_html'), f, class: 'btn btn-danger btn-sm', id: 'remove_row' %>
  </td>
</tr>
